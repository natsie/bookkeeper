var{defineProperty:h,getOwnPropertyNames:u,getOwnPropertyDescriptor:v}=Object,l=Object.prototype.hasOwnProperty;var m=new WeakMap,C=(s)=>{var r=m.get(s),n;if(r)return r;if(r=h({},"__esModule",{value:!0}),s&&typeof s==="object"||typeof s==="function")u(s).map((o)=>!l.call(r,o)&&h(r,o,{get:()=>s[o],enumerable:!(n=v(s,o))||n.enumerable}));return m.set(s,r),r};var F=(s,r)=>{for(var n in r)h(s,n,{get:r[n],enumerable:!0,configurable:!0,set:(o)=>r[n]=()=>o})};var j={};F(j,{createLogFileWriter:()=>_,createConsoleWriter:()=>T});module.exports=C(j);var d=require("node:util"),w=require("node:fs/promises");var y=new Set(["log","info","warn","error"]),a=[["Sunday","Sun"],["Monday","Mon"],["Tuesday","Tue"],["Wednesday","Wed"],["Thursday","Thu"],["Friday","Fri"],["Saturday","Sat"]],A=(s,r)=>{return(r instanceof Map?[...r]:Object.entries(r)).reduce((o,[c,e])=>o.replaceAll(c,e),s)},f=(s,r,n,o="{{processed_data}}")=>{let c=r.data.map((p)=>n(s,p)).join(`
`),e=new Date(r.timestamp),i=e.toISOString(),[O,L]=i.slice(0,-1).split("T");return A(o,{"{{log_type}}":r.type,"{{processed_data}}":c,"{{timestamp}}":String(Math.floor(r.timestamp)),"{{timestamp_precise}}":String(r.timestamp),"{{iso_date}}":i,"{{date}}":O,"{{time}}":L,"{{JJ}}":a[e.getDay()][0].toUpperCase(),"{{jj}}":a[e.getDay()][0],"{{J}}":a[e.getDay()][1].toUpperCase(),"{{j}}":a[e.getDay()][1],"{{YYYY}}":e.getFullYear().toString(),"{{YY}}":e.getFullYear().toString().slice(-2),"{{MM}}":e.getMonth().toString().padStart(2,"0"),"{{M}}":e.getMonth().toString(),"{{dd}}":e.getDate().toString().padStart(2,"0"),"{{HH}}":e.getHours().toString().padStart(2,"0"),"{{hh}}":(e.getHours()%12).toString().padStart(2,"0"),"{{mm}}":e.getMinutes().toString().padStart(2,"0"),"{{ss}}":e.getSeconds().toString().padStart(2,"0"),"{{H}}":e.getHours().toString(),"{{h}}":(e.getHours()%12).toString(),"{{m}}":e.getMinutes().toString(),"{{s}}":e.getSeconds().toString(),"{{ms++}}":e.getMilliseconds().toString().padStart(3,"0"),"{{ms+}}":e.getMilliseconds().toString().padStart(2,"0"),"{{ms}}":e.getMilliseconds().toString(),"{{PP}}":e.getHours()>=12?"PM":"AM","{{pp}}":e.getHours()>=12?"pm":"am","{{P}}":e.getHours()>=12?"P":"M","{{p}}":e.getHours()>=12?"p":"m"})};var I=(s,r,n)=>{if(typeof n==="string")return n;return d.inspect(n,{...r,colors:!1})},T=(s)=>{let r=s.template??"{{processed_data}}",n=Object.assign({},s.inspectOptions??{},{colors:!0}),o=(c,e)=>I(c,n,e);return s.clearPreviousLogs&&console.clear(),(c,e)=>{if(y.has(e.type))console[e.type](f(c,e,o,r));else console.log(f(c,e,o,r))}},_=async(s,r={})=>{let n=await w.open(s,"a"),o=[],c={template:r.template??"{{processed_data}}",clearPreviousLogs:r.clearPreviousLogs??!1,inspectOptions:Object.assign({},r.inspectOptions??{},{colors:!1})},e=(p,t)=>I(p,c.inspectOptions,t),i=!0,O=async(p)=>{i=!1;while(o.length>0){let t=o.shift();if(!t)continue;await n.write(f(p,t,e,c.template)+`
`).catch((P)=>{return console.error("An error occurred while writing to the log file.",{logger:p,log:t,error:P}),null})}i=!0};if(c.clearPreviousLogs)await w.writeFile(s,"").catch((p)=>{console.error("An error occurred while clearing the log file.",{error:p})});let L=(p,t)=>{o.push(t),i&&O(p)};return L.close=async()=>await n.close(),L};

//# debugId=633E60A98854896464756E2164756E21
//# sourceMappingURL=node.cjs.map
