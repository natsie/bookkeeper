var w=new Set(["log","info","warn","error"]),i=[["Sunday","Sun"],["Monday","Mon"],["Tuesday","Tue"],["Wednesday","Wed"],["Thursday","Thu"],["Friday","Fri"],["Saturday","Sat"]],h=(n,e)=>{return(e instanceof Map?[...e]:Object.entries(e)).reduce((o,[s,r])=>o.replaceAll(s,r),n)},f=(n,e,c,o="{{processed_data}}")=>{let s=e.data.map((p)=>c(n,p)).join(`
`),r=new Date(e.timestamp),a=r.toISOString(),[L,m]=a.slice(0,-1).split("T");return h(o,{"{{log_type}}":e.type,"{{processed_data}}":s,"{{timestamp}}":String(Math.floor(e.timestamp)),"{{timestamp_precise}}":String(e.timestamp),"{{iso_date}}":a,"{{date}}":L,"{{time}}":m,"{{JJ}}":i[r.getDay()][0].toUpperCase(),"{{jj}}":i[r.getDay()][0],"{{J}}":i[r.getDay()][1].toUpperCase(),"{{j}}":i[r.getDay()][1],"{{YYYY}}":r.getFullYear().toString(),"{{YY}}":r.getFullYear().toString().slice(-2),"{{MM}}":r.getMonth().toString().padStart(2,"0"),"{{M}}":r.getMonth().toString(),"{{dd}}":r.getDate().toString().padStart(2,"0"),"{{HH}}":r.getHours().toString().padStart(2,"0"),"{{hh}}":(r.getHours()%12).toString().padStart(2,"0"),"{{mm}}":r.getMinutes().toString().padStart(2,"0"),"{{ss}}":r.getSeconds().toString().padStart(2,"0"),"{{H}}":r.getHours().toString(),"{{h}}":(r.getHours()%12).toString(),"{{m}}":r.getMinutes().toString(),"{{s}}":r.getSeconds().toString(),"{{ms++}}":r.getMilliseconds().toString().padStart(3,"0"),"{{ms+}}":r.getMilliseconds().toString().padStart(2,"0"),"{{ms}}":r.getMilliseconds().toString(),"{{PP}}":r.getHours()>=12?"PM":"AM","{{pp}}":r.getHours()>=12?"pm":"am","{{P}}":r.getHours()>=12?"P":"M","{{p}}":r.getHours()>=12?"p":"m"})};var y=(n,e,c)=>{if(typeof c==="string")return c;return JSON.stringify(c,null,n)},d=async(n)=>{let e=n.template??"{{processed_data}}",c=n.formatSpacing??2,o=(s,r)=>y(c,s,r);return n.clearPreviousLogs&&console.clear(),(s,r)=>{if(w.has(r.type))console[r.type](f(s,r,o,e));else console.log(f(s,r,o,e))}},x=async(n,e)=>{let c=await n.createWritable({keepExistingData:!0}),o=e.template??"{{processed_data}}",s=e.formatSpacing??2,r=[],a=(p,t)=>y(s,p,t);e.clearPreviousLogs&&c.truncate(0);let L=!0,m=async(p)=>{L=!1;while(r.length>0){let t=r.shift();if(!t)continue;await c.write(f(p,t,a,o)+`
`).catch((u)=>{return console.error("An error occurred while writing to the log file.",{logger:p,log:t,error:u}),null})}L=!0};return(p,t)=>{r.push(t),L&&m(p)}};export{x as createLogFileWriter,d as createConsoleWriter};

//# debugId=C697AEC95AD3A91E64756E2164756E21
//# sourceMappingURL=browser.mjs.map
