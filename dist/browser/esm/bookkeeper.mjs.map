{
  "version": 3,
  "sources": ["..\\..\\..\\src\\bookkeeper.ts"],
  "sourcesContent": [
    "import type { Log, LogWriter } from \"./types/bookkeeper.ts\";\r\n\r\nconst nonNullable = <T>(value: T): NonNullable<T> => {\r\n  if (value == null) throw new TypeError(\"The provided value is null or undefined\");\r\n  return value;\r\n};\r\n\r\nconst randomLoggerName = (): string => `bookkeeper-${1e5 + ~~(Math.random() * (1e6 - 1e5))}`;\r\n\r\nclass Logger {\r\n  name: string;\r\n  interfaces: Map<string, { active: boolean; writer: LogWriter }>;\r\n  constructor(name: string = randomLoggerName()) {\r\n    this.name = name;\r\n    this.interfaces = new Map();\r\n  }\r\n\r\n  addInterface(name: string, writer: LogWriter): Logger {\r\n    this.interfaces.set(name, { active: true, writer });\r\n    return this;\r\n  }\r\n  removeInterface(name: string): Logger {\r\n    this.interfaces.delete(name);\r\n    return this;\r\n  }\r\n  enableInterface(name: string): Logger {\r\n    const _interface = nonNullable(this.interfaces.get(name));\r\n    _interface.active = true;\r\n    return this;\r\n  }\r\n  disableInterface(name: string): Logger {\r\n    const _interface = nonNullable(this.interfaces.get(name));\r\n    _interface.active = false;\r\n    return this;\r\n  }\r\n  handleLog(type: string, data: unknown[]): null {\r\n    const log: Log = {\r\n      type,\r\n      data,\r\n      timestamp: performance.timeOrigin + performance.now(),\r\n    };\r\n    for (const [name, _interface] of this.interfaces) {\r\n      try {\r\n        _interface.active && _interface.writer(this, log);\r\n      } catch (error) {\r\n        console.error(`The writer for interface ${name} failed to handle a log.`, error);\r\n      }\r\n    }\r\n    return null;\r\n  }\r\n\r\n  log(...data: unknown[]) {\r\n    this.handleLog(\"log\", data);\r\n  }\r\n  info(...data: unknown[]) {\r\n    this.handleLog(\"info\", data);\r\n  }\r\n  warn(...data: unknown[]) {\r\n    this.handleLog(\"warn\", data);\r\n  }\r\n  error(...data: unknown[]) {\r\n    this.handleLog(\"error\", data);\r\n  }\r\n  logCustom(type: string, ...data: unknown[]) {\r\n    this.handleLog(type, data);\r\n  }\r\n}\r\n\r\nexport { Logger };\r\n"
  ],
  "mappings": "AAEA,IAAM,EAAc,CAAI,IAA6B,CACnD,GAAI,GAAS,KAAM,MAAU,UAAU,yCAAyC,EAChF,OAAO,GAGH,EAAmB,IAAc,cAAc,IAAM,CAAC,EAAE,KAAK,OAAO,EAAK,UAE/E,MAAM,CAAO,CACX,KACA,WACA,WAAW,CAAC,EAAe,EAAiB,EAAG,CAC7C,KAAK,KAAO,EACZ,KAAK,WAAa,IAAI,IAGxB,YAAY,CAAC,EAAc,EAA2B,CAEpD,OADA,KAAK,WAAW,IAAI,EAAM,CAAE,OAAQ,GAAM,QAAO,CAAC,EAC3C,KAET,eAAe,CAAC,EAAsB,CAEpC,OADA,KAAK,WAAW,OAAO,CAAI,EACpB,KAET,eAAe,CAAC,EAAsB,CACpC,IAAM,EAAa,EAAY,KAAK,WAAW,IAAI,CAAI,CAAC,EAExD,OADA,EAAW,OAAS,GACb,KAET,gBAAgB,CAAC,EAAsB,CACrC,IAAM,EAAa,EAAY,KAAK,WAAW,IAAI,CAAI,CAAC,EAExD,OADA,EAAW,OAAS,GACb,KAET,SAAS,CAAC,EAAc,EAAuB,CAC7C,IAAM,EAAW,CACf,OACA,OACA,UAAW,YAAY,WAAa,YAAY,IAAI,CACtD,EACA,QAAY,EAAM,KAAe,KAAK,WACpC,GAAI,CACF,EAAW,QAAU,EAAW,OAAO,KAAM,CAAG,EAChD,MAAO,EAAO,CACd,QAAQ,MAAM,4BAA4B,4BAAgC,CAAK,EAGnF,OAAO,KAGT,GAAG,IAAI,EAAiB,CACtB,KAAK,UAAU,MAAO,CAAI,EAE5B,IAAI,IAAI,EAAiB,CACvB,KAAK,UAAU,OAAQ,CAAI,EAE7B,IAAI,IAAI,EAAiB,CACvB,KAAK,UAAU,OAAQ,CAAI,EAE7B,KAAK,IAAI,EAAiB,CACxB,KAAK,UAAU,QAAS,CAAI,EAE9B,SAAS,CAAC,KAAiB,EAAiB,CAC1C,KAAK,UAAU,EAAM,CAAI,EAE7B",
  "debugId": "A19CA5487FCF2DE864756E2164756E21",
  "names": []
}